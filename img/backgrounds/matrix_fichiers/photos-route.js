(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1202:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var a=n(9),o=n.n(a),r=n(3),i=n(0),c=n.n(i),s=n(14),u=n(967),l=n(8),d=n.n(l),p=n(81),h=n(16),m=n(40),f=n(172),b=n(171),v=n(1227),y=n(1251),g=n.n(y),_=d()({Username:Object(l.ofType)(),Sponsored:Object(l.ofType)()}),O=Object(h.a)()({type:"default",includeAvatar:!1});t.b=Object(m.a)(Object(s.connect)(function(e,t){return{user:Object(f.c)(e,t.userId)}})(function(e){var t=e.user,n=e.type,a=e.secondaryLabel,i=e.children,s=e.includeAvatar,l=e.inline,d=e.isInFollowingFeed,h=function(){switch(n){case"default":return[];case"alt":return[g.a.alt];case"emphasiseUsername":return[g.a.mainLinkEmphasiseUsernameType,g.a.linkEmphasiseUsernameType]}}();return c.a.createElement("span",{className:g.a.container},s&&c.a.createElement(v.a,{user:t},c.a.createElement(b.a,{user:t,className:g.a.avatar})),c.a.createElement("div",{className:o()(g.a.linkContainer,l&&g.a.inlineContainer,d&&g.a.feedContainer)},c.a.createElement(v.a,{user:t},c.a.createElement(u.a,{to:{pathname:Object(p.c)(t)},className:o()(g.a.name,h,!a&&g.a.centerName,l&&g.a.inlineLink)},i||t.name),function(e){var t=e.secondaryLabel,n=e.type,a=e.user,i=function(){switch(n){case"alt":return g.a.alt;case"emphasiseUsername":return g.a.linkEmphasiseUsernameType;default:return}}();return r.a.of(t).map(_.match({Sponsored:function(e){var t=e.text,n=e.className;return c.a.createElement("div",{className:o()(i,g.a.secondaryLabel,n)},t)},Username:function(){return c.a.createElement(u.a,{to:{pathname:Object(p.c)(a)},className:o()(i,g.a.secondaryLabel)},"@",a.username)}})).orNull()}({secondaryLabel:a,type:n,user:t}))))}),O)},1204:function(e,t,n){e.exports={floatLeft:"_2T3hc",floatRight:"_3pmDG",colorLightGrey:"#ddd",colorGrey:"#999",container:"y5w1y",photo:"cV68d",infoItem:"_3x2Gt",photoInfo:"hduMF _3x2Gt",leftActions:"_31wG7 _2T3hc",rightActions:"_287Ma _3pmDG",collectionButtonContainer:"_1XDiz",userLink:"_3isoq",userImageContainer:"_8p1N4 _2T3hc",userAvatar:"_1fYZF",userName:"_1imKo _2T3hc",userTopLink:"_1f9xN _3x2Gt",extraInfoClassname:"_3NBxl _3x2Gt",secondaryLabel:"_39Pcy"}},1205:function(e,t,n){"use strict";var a=n(1202);n.d(t,"a",function(){return a.b})},1206:function(e,t,n){"use strict";var a=n(239),o=n.n(a),r=n(0),i=n.n(r),c=n(9),s=n.n(c),u=n(14),l=n(967),d=n(11),p=n(111),h=n(1232),m=n.n(h),f=function(e){var t=e.tag,n=e.emplacement,a=e.trackSearchSuggestionClick,o=e.className;return i.a.createElement(l.a,{className:s()(m.a.smallTag,o),to:Object(p.b)(t.title),title:t.title+" images",onClick:function(){return a(t.title.toLowerCase(),n)}},t.title)};f.displayName="SmallTag";var b={trackSearchSuggestionClick:d.hb},v=Object(u.connect)(function(){return{}},b)(f),y=n(1230),g=n.n(y),_=function(e){var t=e.tags,n=e.emplacement,a=e.takeN;return i.a.createElement("div",{className:g.a.tagsContainer},(a?o()(t,a):t).map(function(e){return i.a.createElement("div",{key:e.title,className:g.a.tagItem},i.a.createElement(v,{tag:e,emplacement:n}))}))};_.displayName="SmallTagsList";var O=_;n.d(t,"a",function(){return O})},1213:function(e,t,n){"use strict";n(621);var a=n(9),o=n.n(a),r=n(0),i=n.n(r),c=n(14),s=n(308),u=n(11),l=n(39),d=n(17),p=n(18),h=n(16),m=n(15),f=n(40),b=n(32),v=n(168),y=n(30),g=n(26),_=n(1255),O=n.n(_),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var j=Object(h.a)()({type:"default"}),E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),w(t,[{key:"componentWillUnmount",value:function(){this.likesSubscription&&this.likesSubscription.unsubscribe()}},{key:"buildToLink",value:function(){var e=this.props,t=e.isLoggedIn,n=e.location,a=e.photo,o=Object(d.f)(n),r=t?o:Object.assign({},o,{login_view:"is_visible",login_action:"like",login_from_photo:a.id});return{pathname:n.pathname,search:Object(m.c)(r),state:n.state}}},{key:"isLikedModifier",value:function(){var e=this.props,t=e.photo,n="default"===e.type?"outline":"outline-alt";return t.liked_by_user?"pink":n}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,n=t.photo,a=t.trackPhotoUnlike,o=t.trackPhotoLike,r=t.unlikePhoto,i=t.likePhoto,c=n.liked_by_user,u=c?l.a.photos.unlikePhoto:l.a.photos.likePhoto,d=c?a:o,p=c?r:i,h=u({photoId:n.id}).pipe(Object(s.retry)(3));return function(t){t.preventDefault(),p(n.id),d(n),e.likesSubscription=h.subscribe()}}},{key:"renderLikesLabel",value:function(){var e=this.props.photo;return e.likes?i.a.createElement("span",{className:O.a.labelLike},e.likes):i.a.createElement("span",null)}},{key:"render",value:function(){var e,t,n,a=this.props,r=a.photo,c=a.setSelectedPhoto,s=a.trackPhotoLike,u=a.className,l=a.isLoggedIn?this.buildClickHandler():function(){c({id:r.id}),s(r)};return i.a.createElement(y.a,{className:o()(O.a.buttonLike,u),buttonType:this.isLikedModifier(),tag:"link",title:"Like photo",buttonSize:"small",to:this.buildToLink(),onClick:l},i.a.createElement("span",null,i.a.createElement(g.a,{type:p.a.heart,className:o()(O.a.likeIcon,(e={},t=O.a.likeIconLiked,n=r.liked_by_user,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))}),this.renderLikesLabel()))}}]),t}();E.displayName="LikeButton";var I={trackPhotoUnlike:u.fb,trackPhotoLike:u.eb,unlikePhoto:u.nb,likePhoto:u.t,setSelectedPhoto:u.M},T=Object(f.a)(Object(c.connect)(function(e,t){return{photo:Object(v.b)(e,t.photoId),isLoggedIn:Object(b.h)(e)}},I)(E),j);n.d(t,"a",function(){return T})},1214:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(0),i=n.n(r),c=n(14),s=n(11),u=n(18),l=n(16),d=n(40),p=n(208),h=n(168),m=n(30),f=n(26),b=n(1257),v=n.n(b);var y=Object(l.a)()({type:"default",label:"Download"}),g=function(e){var t,n,a,r=e.photo,c=e.trackPhotoDownloadButtonClick,s=e.type,l=e.showLabel,d=e.className,h=e.showFixedBottomCard,b=e.label,y=l&&i.a.createElement("span",{className:v.a.label},b),g=i.a.createElement(f.a,{type:u.a.download,className:o()(v.a.downloadIcon,(t={},n=v.a.labelIcon,a=l,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}),_=function(){switch(s){case"default":return"outline";case"alt":return"outline-alt";case"green":return"green"}}();return i.a.createElement(m.a,{className:o()(v.a.button,d),buttonType:_,buttonSize:"small",title:"Download photo",href:r.links.download+"?force=true",rel:"nofollow",download:!0,target:"_blank",track:function(){c(r);var e=p.a.SayThanks({photoId:r.id});h({card:e})}},i.a.createElement("span",null,g,y))};g.displayName="DownloadButton";var _={trackPhotoDownloadButtonClick:s.db,showFixedBottomCard:s.a.ShowFixedBottomCard},O=Object(d.a)(Object(c.connect)(function(e,t){return{photo:Object(h.b)(e,t.photoId)}},_)(g),y);n.d(t,"a",function(){return O})},1215:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(0),i=n.n(r),c=n(14),s=n(11),u=n(417),l=n(18),d=n(16),p=n(40),h=n(32),m=n(168),f=n(30),b=n(26),v=n(17),y=n(15),g=n(1259),_=n.n(g),O=Object(d.a)()({type:"default"}),w=function(e){var t=e.photo,n=e.setSelectedPhoto,a=e.trackCollectionButtonClick,r=e.location,c=e.type,s=e.className,u=e.isLoggedIn,d=e.handleClick,p=e.children,h="default"===c?"outline":"outline-alt";return i.a.createElement(f.a,{className:o()(_.a.buttonCollections,s),buttonType:function(e,t){return t.current_user_collection_ids&&t.current_user_collection_ids.length>0?"green":e}(h,t),buttonSize:"small",tag:"link",title:"Add to collection",to:function(e){var t=e.isLoggedIn,n=e.location,a=e.photo,o=Object(v.f)(n),r=t?Object.assign({},o,{add_to_collection_view:"is_visible"}):Object.assign({},o,{login_view:"is_visible",login_action:"add_to_collection",login_from_photo:a.id});return{pathname:n.pathname,search:Object(y.c)(r),state:n.state}}({isLoggedIn:u,location:r,photo:t}),onClick:function(){n({id:t.id}),a(t.id),d&&d()}},i.a.createElement(b.a,{type:l.a.plus,className:_.a.addIcon}),i.a.createElement("span",{className:_.a.label},p,"Collect"))};w.displayName="AddToCollectionButton";var j=Object(u.c)()(function(e,t){return{photo:Object(m.b)(e,t.photoId),isLoggedIn:Object(h.h)(e)}}),E=Object(u.b)()({setSelectedPhoto:s.M,trackCollectionButtonClick:s.U}),I=Object(p.a)(Object(c.connect)(j,E)(w),O);n.d(t,"a",function(){return I})},1216:function(e,t,n){e.exports={colorLightGrey:"#ddd",floatLeft:"_2T3hc",floatRight:"_3pmDG","--sm-min":"(--sm-min)",transitionDuration:"0.15s",transitionTimingFunction:"ease-in-out",container:"yVU8k",overlayContainer:"_2AEfn",colorFade:"tw9cm",actionsTop:"_3D-am",actionsBottom:"_3dZoB",userContainer:"_3Rkcv",buttonDownloadContainer:"_12slh",addToCollectionButtonContainer:"_31quJ",secondaryLabel:"_38X-9"}},1217:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(3),o=n(1202),r=function(e){var t=e.photo,n=e.className;return t.sponsored?a.a.some(o.a.Sponsored({text:"Sponsored by Google Chromebooks",className:n})):a.a.none()}},1218:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(3),o=n(0),r=n.n(o),i=n(70),c=n(99),s=n(1226),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]])}return n},d=function(e){var t="WrapWithPhotoLink("+Object(c.a)(e)+")",n=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onImgLoad=function(e){var n=a.a.of(e.currentTarget.currentSrc).filter(i.b);(0,t.props.enqueueUpdateFunction)(function(){t.setState({maybeImgCurrentSrc:n})})},t.state={maybeImgCurrentSrc:a.a.none()},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o["Component"]),u(n,[{key:"render",value:function(){var t=this.props,n=t.photoId,a=(t.enqueueUpdateFunction,t.linkTo,t.shouldSetLinkItemProp),o=l(t,["photoId","enqueueUpdateFunction","linkTo","shouldSetLinkItemProp"]),i=this.state.maybeImgCurrentSrc,c=Object.assign({onLoad:this.onImgLoad},o);return r.a.createElement(s.a,{photoId:n,maybeImgCurrentSrc:i,shouldSetLinkItemProp:a},r.a.createElement(e,Object.assign({},c)))}}]),n}();return n.displayName=t,n}},1219:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(422),i=n(415),c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]])}return n},s=function(e){var t,n,a=e.imgDimensions,s=e.containerStyle,u=c(e,["imgDimensions","containerStyle"]);return o.a.createElement(r.a,Object.assign({},u,{containerStyle:Object.assign({},s,(t=a,n=t.height/t.width,{paddingBottom:Object(i.h)(n)}))}))};s.displayName="ImgWithPreservedAspectRatio",n.d(t,"a",function(){return s})},1220:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(14),i=n(168),c=n(3),s={sZYUKEWsDLA:2462332,wClUbRMCBD8:2462333,ADjcacMLblo:2462334,"A9Msi-vUNKg":2462335,"Kqc-mLtLQls":2462336,rndjGfyInvs:2462337,"2JknzBYDu6k":2462338,n6jNHTg2C2w:2462339,GOZxrAlNIt4:2462340,zwsHjakE_iI:2462341,EV0IwJzQjE8:2462342,uQvUByH89MA:2462343,rFKBUwLg_WQ:2462344,"-4Wi_ii6StY":2462345,OqkJRauvYXo:2462346,g1Kr4Ozfoac:2462347,"C-v1p2DTakA":2462348,"4I0NZ27uKQE":2462349,Ftx92UKO3Xg:2462350,Uduc5hJX2Ew:2462351,Pfd1UPt7fDw:2462352,"442btOpRp9Q":2462353,LSMnceqBOcw:2462354,pRdgN2LvQ9o:2462355,W1B2LpQOBxA:2462356,cqOZcjOOmRw:2462357,"3H_2x19c23A":2462358,a51BtuS7upk:2462359,NqReTJfnAT0:2462360,Z_Rh6USNt1c:2462361,YtzpWzIgadQ:2462362,Ds5ieEuH4Z8:2462363,"2rmEc1-NIkk":2462364,gxu0TOEOtaU:2462365,TxqSJGAdMyk:2462366,eJTB4RgLnMo:2462367,kbkyZAfSuFs:2462368,xezgvDz9e08:2462369,"N-X3TCHj5Jk":2462370,O0x1JDBCv8w:2462371,KCMz_OMLiEQ:2462372,OTHx6EGkAVA:2462373,EmBO_ZFnoB0:2462374,voKxckzYLnI:2462375,"4auoPgsJ3iY":2462376,De8wMYoSSBc:2462377,Xe7WJc6ZV5k:2462378,sW_10braKvE:2462379},u=n(1275),l=n.n(u),d=function(e){var t=e.children,n=e.photo,a=function(e){var t=e.photoId;return c.a.of(s[t]).map(function(e){return"https://secure.insightexpressai.com/adServer/adServerESI.aspx?script=false&bannerID="+e+"&rnd=unsplash&redir=https://secure.insightexpressai.com/adserver/1pixel.gif"})}({photoId:n.id});return o.a.createElement("div",null,t,n.sponsored?a.map(function(e){return o.a.createElement("img",{className:l.a.image,src:e})}).orNull():null)};d.displayName="SponsoredPhotoTracker";var p=Object(r.connect)(function(e,t){return{photo:Object(i.b)(e,t.photoId)}})(d);n.d(t,"a",function(){return p})},1223:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(87);t.refCount=function(){return function(e){return e.lift(new r(e))}};var r=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var a=new i(e,n),o=t.subscribe(a);return a.closed||(a.connection=n.connect()),o},e}(),i=function(e){function t(t,n){e.call(this,t),this.connectable=n}return a(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,a=e._connection;this.connection=null,!a||n&&a!==n||a.unsubscribe()}}else this.connection=null},t}(o.Subscriber)},1226:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(3),i=n(0),c=n.n(i),s=n(14),u=n(1645),l=n(967),d=n(425),p=n(16),h=n(40),m=n(168),f=n(98),b=n(1244),v=n.n(b),y=Object(p.a)()({maybeImgCurrentSrc:r.a.none()}),g=function(e){var t=e.photoId,n=e.linkTo,a=e.location,i=e.children,s=e.isPhone,u=e.user,p=e.maybeImgCurrentSrc,h=e.linkClassName,m=e.shouldSetLinkItemProp,f={photoId:t,location:a,isPhone:s,initialSrc:p.orUndefined()};return c.a.createElement(l.a,{title:"View the photo by "+u.name,to:r.a.of(n).getOrElseL(function(){return Object(d.a)(f)}),itemProp:m?"contentUrl":void 0,className:o()(v.a.photoInfoLink,h)},i)};g.displayName="PhotoLink";var _=Object(h.a)(Object(u.a)(Object(s.connect)(function(e,t){return{isPhone:Object(f.f)(e),user:Object(m.e)(e,t.photoId)}})(g)),y);n.d(t,"a",function(){return _})},1227:function(e,t,n){"use strict";var a,o=n(0),r=n.n(o),i=n(14),c=n(11),s=n(39),u=n(1246),l=n(69),d=n(9),p=n.n(d),h=n(310),m=n.n(h),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(e){e.mount="mount",e.visibility="visibility"}(a||(a={}));var b=function(){return!(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)},v=n(41),y=n(427),g=n(1235),_=n(1253),O=n.n(_),w=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),w(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.updateData;Object(v.checkNormalizedUserHasFullInfo)(t)||s.a.users.getUserProfile({usernameOrId:t.username}).toPromise().then(l.i).then(function(e){var t=e.entities;n(t)})}},{key:"render",value:function(){var e=this.props.user;return Object(v.checkNormalizedUserHasFullInfo)(e)?r.a.createElement(y.a,{className:O.a.cardTooltipContainer},r.a.createElement(g.a,{withinContainer:!0,fullWidth:!0,withActionButton:!0,user:e})):null}}]),t}();j.displayName="UserDetailsCard";var E={updateData:c.qb},I=Object(i.connect)(null,E)(j),T=I,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,i=void 0===n?0:n,c=t.mode,s=void 0===c?a.mount:c,u=t.wrapperClassName,l=t.targetWrapperClassName,d=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleMouseMove=function(){!b()||t.state.isHovering||t.hoverTimerId||(t.hoverTimerId=window.setTimeout(function(){t.hoverTimerId=null,t.setState({isHovering:!0})},i))},t.handleMouseLeave=function(){t.hoverTimerId&&(window.clearTimeout(t.hoverTimerId),t.hoverTimerId=null),t.setState({isHovering:!1})},t.state={isHovering:!1},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),f(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=!m()(this.props,e),a=this.state.isHovering!==t.isHovering;return n||a}},{key:"renderHoverContents",value:function(){var t=this.state.isHovering;switch(s){case a.visibility:return r.a.createElement("span",{className:p()(l),style:{visibility:t?"visible":"hidden"}},r.a.createElement(e,Object.assign({},this.props)));case a.mount:return t?r.a.createElement(e,Object.assign({},this.props)):null}}},{key:"render",value:function(){return r.a.createElement("div",{className:p()(u),onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave},this.props.children,this.renderHoverContents())}}]),n}();return d.displayName="WrappedHoverComponent",d}(I,{delay:u.a,wrapperClassName:O.a.wrapperHoverClassName});n.d(t,"a",function(){return k}),n.d(t,!1,function(){return T})},1228:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return function(t){return e.username===t.username}}},1230:function(e,t,n){e.exports={gutter:"8px",tagsContainer:"_2_OE1",tagItem:"_3Z-ua"}},1232:function(e,t,n){e.exports={smallTag:"_6PxCM"}},1233:function(e,t,n){"use strict";n(621);var a=n(9),o=n.n(a),r=n(138),i=n.n(r),c=n(0),s=n.n(c),u=n(14),l=n(1645),d=n(308),p=n(309),h=n(11),m=n(39),f=n(17),b=n(18),v=n(16),y=n(15),g=n(40),_=n(32),O=n(30),w=n(26),j=n(1242),E=n.n(j),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var T=Object(v.a)()({labelText:{isFollowing:"Following",isNotFollowing:"Follow"}}),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c["Component"]),I(t,[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,n=e.location,a=Object(f.f)(n),o=t?a:Object.assign({},a,{login_view:"is_visible",login_action:"follow"});return{pathname:n.pathname,search:Object(y.c)(o),state:n.state}}},{key:"buildClickHandler",value:function(){var e=this,t=this.props,n=t.authUser,a=t.selectedUser,o=t.followUser,r=t.unfollowUser,i=t.trackFollowButtonClick,c=t.trackUnfollowButtonClick,s=t.buttonType;if(!n)return function(){return i(a.id,s)};var u=a.username,l=a.followed_by_user,h=(l?m.a.users.unfollowUser:m.a.users.followUser)({username:u}).pipe(Object(d.retry)(3),Object(p.take)(1));return function(t){t.stopPropagation(),l?(r(a.id),c(a.id,s)):(o(a.id),i(a.id,s)),e.followSubscription=h.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,n=t.selectedUser,a=t.className,r=t.redirectAfterFollow,i=t.authUser,c=this.buildClickHandler(),u=n.followed_by_user,l=r||!i,d={className:o()(E.a.followButton,u&&E.a.isFollowing,a),buttonSize:"small"};return l?s.a.createElement(O.a,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:c},d),e):s.a.createElement(O.a,Object.assign({tag:"button",onMouseUp:c},d),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,n=e.authUser;return i()(n,"username")===t.username?s.a.createElement("div",null):this.renderContainer(s.a.createElement("span",null,s.a.createElement(w.a,{type:b.a.follow,className:E.a.followIcon}),this.getLabelText()))}}]),t}();k.displayName="FollowButton";Object(g.a)(k,T);var C={trackFollowButtonClick:h.Y,trackUnfollowButtonClick:h.jb,followUser:h.q,unfollowUser:h.mb},S=Object(g.a)(Object(l.a)(Object(u.connect)(function(e){return{authUser:Object(_.c)(e)}},C)(k)),T);n.d(t,"a",function(){return S})},1235:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(138),i=n.n(r),c=n(0),s=n.n(c),u=n(14),l=n(967),d=n(81),p=n(16),h=n(1228),m=n(40),f=n(32),b=n(168),v=n(41),y=n(49),g=n(171),_=n(242),O=n(30),w=n(1233),j=n(1),E=n.n(j),I=n(13),T=n(1240),k=n.n(T),C={photo:E.a.object,darker:E.a.bool.isRequired},S=function(e){var t=e.photo,n=e.darker,a=i()(t,"urls.thumb"),r=i()(t,"color");return s.a.createElement("div",{className:o()(k.a.photoThumbContainer,n?k.a.photoThumbContainerDark:k.a.photoThumbContainerLight),style:t&&{backgroundColor:r}},s.a.createElement("div",{className:k.a.photoThumb,style:t&&{backgroundImage:Object(I.w)(a)}}))};S.propTypes=C,S.defaultProps={darker:!1};var N=S,P=n(1238),L=n.n(P);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=Object(p.a)()({withinContainer:!1}),R=function(e){var t,n=e.user,a=e.userPhotos,r=e.maybeAuthUser,c=e.withinContainer,u=e.fullWidth,p=e.withActionButton,m=e.children,f=!!n.total_photos,b=f&&Object(y.h)(3).map(function(e){return s.a.createElement(N,{key:e,photo:i()(a,e)})}),v=r.exists(Object(h.a)(n))?function(e){return s.a.createElement(O.a,{buttonSize:"small",buttonType:"outline",tag:"link",to:{pathname:Object(d.c)(e)},className:L.a.actionButton},"View profile")}(n):function(e){return s.a.createElement(w.a,{selectedUser:e,className:L.a.actionButton})}(n);return s.a.createElement("div",{className:o()(L.a.cardLink,(t={},x(t,L.a.cardLinkWithinContainer,c),x(t,L.a.cardLinkFullWidth,u),t))},s.a.createElement(l.a,{className:L.a.container,to:{pathname:Object(d.c)(n)},onClick:function(){return window.scrollTo(0,0)}},s.a.createElement("div",{className:L.a.topContainer},s.a.createElement("div",{className:L.a.userAvatarContainer},s.a.createElement(g.a,{className:L.a.avatar,user:n,avatarSize:_.a.medium,disableLink:!0})),s.a.createElement("div",{className:L.a.userInfoContainer},s.a.createElement("h5",{className:L.a.userName},n.name),s.a.createElement("p",{className:L.a.userHandle},"@"+n.username))),f&&s.a.createElement("div",{className:L.a.bottomContainer},b)),p&&s.a.createElement("div",{className:L.a.actionButtonContainer},v),m)};R.displayName="UserResultCard";var U=Object(m.a)(Object(u.connect)(function(e,t){return{maybeAuthUser:Object(f.e)(e),userPhotos:Object(v.checkUserWithFullInfoIsDenormalized)(t.user)?t.user.photos:Object(b.c)(e,t.user.photoIds)}})(R),D);n.d(t,"a",function(){return U})},1238:function(e,t,n){e.exports={clearfix:"_2KLco","sm-col":"_6_Gu-","sm-col-6":"_2cVF0","md-col-4":"_1hITE",px2:"_2DKvn","--sm-min":"(--sm-min)",colorLightGrey:"#ddd",colorGrey:"#999",colorLightBlack:"#111",bodyCopy:"_1iWCF",truncate:"_1ByhS",textDecorationNone:"_1CBrG",spacingBase:"16px",avatarSize:"64px",grid:"_15FGY _6_Gu- _2cVF0 _1hITE _2DKvn",cardLink:"_3x_oL",cardLinkFullWidth:"_22ere",cardLinkWithinContainer:"_30-Kv",container:"_2Twi2 _1CBrG",topContainer:"_2Em44 _2KLco",userAvatarContainer:"_6jh8j",avatar:"_2ogcu",userInfoContainer:"_3_xrB",userName:"_2_qf1 _1ByhS _1iWCF",userHandle:"_1l0oJ _1ByhS",bottomContainer:"_1dc02",actionButtonContainer:"_3hG9z",actionButton:"_1FDaB"}},1240:function(e,t,n){e.exports={colors:'"styles/Colors.css"',colorDarkWhite:"#f5f5f5",colorLightGrey:"#ddd",photoThumbContainer:"_1BiZr",photoThumbContainerLight:"_1QflV",photoThumbContainerDark:"_3mBAu",photoThumb:"_2te-4"}},1242:function(e,t,n){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}},1244:function(e,t,n){e.exports={photoInfoLink:"_2Mc8_"}},1246:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var a=600,o=500},1248:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(14),i=n(1645),c=n(16),s=n(40),u=n(168),l=n(1215),d=n(1214),p=n(1213),h=n(1205),m=n(12),f=n(1217),b=n(1216),v=n.n(b),y=Object(m.createSelector)(u.b,function(e){return Object(f.a)({photo:e,className:v.a.secondaryLabel}).orUndefined()}),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var _=Object(c.a)()({inFollowingFeed:!1}),O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),g(t,[{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,n=e.photoId;return o.a.createElement(p.a,{type:"alt",location:t,photoId:n})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,n=e.photoId;return o.a.createElement("div",{className:v.a.addToCollectionButtonContainer},o.a.createElement(l.a,{className:v.a.collectionButton,type:"alt",photoId:n,location:t}))}},{key:"renderDownloadButton",value:function(){var e=this.props.photoId;return o.a.createElement("div",{className:v.a.buttonDownloadContainer},o.a.createElement(d.a,{type:"alt",photoId:e}))}},{key:"renderUserLink",value:function(){var e=this.props,t=e.photoUserId,n=e.secondaryLabel;return o.a.createElement("div",{className:v.a.userContainer},o.a.createElement(h.a,{includeAvatar:!0,userId:t,type:"alt",secondaryLabel:n}))}},{key:"renderTopActions",value:function(){return o.a.createElement("div",{className:v.a.actionsTop},this.renderLikeButton(),this.renderAddToCollectionButton())}},{key:"renderBottomActions",value:function(){return o.a.createElement("div",{className:v.a.actionsBottom},this.renderUserLink(),this.renderDownloadButton())}},{key:"renderColorFade",value:function(){return o.a.createElement("div",{className:v.a.colorFade})}},{key:"render",value:function(){return o.a.createElement("div",{className:v.a.container},this.props.children,o.a.createElement("div",{className:v.a.overlayContainer},this.renderColorFade(),this.renderTopActions(),this.renderBottomActions()))}}]),t}();O.displayName="PhotoOverlay";var w=Object(s.a)(Object(i.a)(Object(r.connect)(function(e,t){return{photoUserId:Object(u.d)(e,t.photoId),photo:Object(u.b)(e,t.photoId),secondaryLabel:y(e,t.photoId)}})(O)),_);n.d(t,"a",function(){return w})},1251:function(e,t,n){e.exports={hoverTransition:"_3XJBh",colorWhite:"#fff",fontWeightMedium:"xLon9",truncate:"_1ByhS",textDecorationNone:"_1CBrG",container:"_2aPXR",avatar:"qNcZ0",linkContainer:"_80uCh",labelHeight:"_4kjHg",name:"_3XzpS _1ByhS _4kjHg",centerName:"_2zITg",secondaryLabel:"vTCGl _1ByhS _4kjHg",alt:"_1_w0v _3XJBh _1CBrG",mainLinkEmphasiseUsernameType:"_1O9Y0 xLon9",linkEmphasiseUsernameType:"_3l__V _1CBrG",inlineContainer:"_3qohC",inlineLink:"_1ZT8D",feedContainer:"_3n7HL"}},1253:function(e,t,n){e.exports={cardTooltipContainer:"_2HDTU",wrapperHoverClassName:"_2tX2R"}},1255:function(e,t,n){e.exports={floatLeft:"_2T3hc",colorPink:"#f15151",colorWhite:"#fff",likeIcon:"BWSrD _2T3hc",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y _2T3hc"}},1257:function(e,t,n){e.exports={"--sm-min":"(--sm-min)",colorWhite:"#fff",button:"_1Tfeo",icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-"}},1259:function(e,t,n){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",addIcon:"_2rdbO _2T3hc",label:"_1eyJo"}},1262:function(e,t,n){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS"}},1264:function(e,t,n){"use strict";var a=n(1279),o=n(1223),r=n(139);function i(){return new r.Subject}t.share=function(){return function(e){return o.refCount()(a.multicast(i)(e))}}},1266:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(8),i=n.n(r),c=Object(r.unionize)({multi:Object(r.ofType)(),single:Object(r.ofType)()}),s=n(5),u=n.n(s),l=n(14),d=n(12),p=n(414),h=n(98),m=n(9),f=n.n(m),b=n(16),v=n(40),y=n(207),g=n(86),_=n(209),O=n(139),w=n(1282),j=n(1281),E=n(1264),I=function(e,t){var n=e.pipe(Object(E.share)());return n.pipe(Object(w.buffer)(n.pipe(Object(j.debounceTime)(t))))},T=n(99),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var C=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dueTime:1e3}).dueTime,n="ProvideUpdatesDebouncer("+Object(T.a)(e)+")",r=function(n){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));n.updateFunctionsDebounceSubject=new O.Subject,n.enqueueUpdateFunction=function(e){return n.updateFunctionsDebounceSubject.next(e)},n.componentWillUnmountSubject=new O.Subject;var a=n.componentWillUnmountSubject.asObservable();return I(n.updateFunctionsDebounceSubject,t).pipe(Object(g.map)(function(e){return function(){e.forEach(function(e){return e()})}})).pipe(Object(_.takeUntil)(a)).subscribe(y.unstable_batchedUpdates),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a["Component"]),k(r,[{key:"componentWillUnmount",value:function(){this.componentWillUnmountSubject.next(),this.componentWillUnmountSubject.complete()}},{key:"render",value:function(){return o.a.createElement(e,Object.assign({},this.props,{enqueueUpdateFunction:this.enqueueUpdateFunction}))}}]),r}();return r.displayName=n,r},S=n(3),N=n(415),P=n(419),L=n(63),x=n(64);function D(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var R=function(e){var t=e.columns;return(e.gridWidth-24*(t-1))/t},U=function(e){var t=24+24*(e-1),n=Object(N.e)(t);return Object(N.a)(function(e,t){return e+" / "+t}(Object(N.a)(Object(N.i)(1)+" - "+n),Object(N.d)(e)))},B=Object(N.b)(Object(N.e)(x.i)),F=Object(N.b)(Object(N.e)(x.g)),A=Object(N.b)(Object(N.e)(1335)),M=[{mediaCondition:A,width:Object(N.e)(R({columns:3,gridWidth:1296}))},{mediaCondition:F,width:U(3)},{mediaCondition:B,width:U(2)}],W=[{width:U(2)}],G=[{mediaCondition:A,width:Object(N.e)(R({columns:1,gridWidth:1296}))},{mediaCondition:B,width:U(1)}],H=[{width:Object(N.i)(1)}],q=c.match({multi:function(){return W},single:function(){return H}}),z=c.match({multi:function(){return M},single:function(){return G}}),Z=function(e){var t,n=e.photo,a=e.preTabletLayout,o=function(e){var t=e.tabletUpLayout,n=e.preTabletLayout,a=z(t),o=q(n);return[].concat(D(a),D(o))}({tabletUpLayout:c.multi({}),preTabletLayout:a}),r=Object(P.d)(o),i=Math.min(n.width,100),s=Math.min(n.width,1296);return{sizes:r,srcSet:Object(P.c)({baseUrl:n.urls.raw,interval:100,lowerBound:i,originalWidth:n.width,upperBound:s}),src:(t=n.urls.raw,Object(L.c)(t)({w:1e3,q:80}))}},V=n(1218),K=n(168),Y=n(1219),J=n(360),X=n(418),Q=n(22),$=n(32),ee=n(41),te=n(1206),ne=n(1277),ae=n.n(ne),oe=(n(244),Object(b.a)()({extraInfoClassname:void 0})),re=function(e){var t,n,a=e.photo,r=e.extraInfoClassname;return o.a.createElement("div",{className:f()(r,ae.a.extraInfoContainer)},(n=a.description,S.a.of(n).map(function(e){return o.a.createElement("figcaption",{itemProp:"caption"},o.a.createElement("p",{className:ae.a.photoDescription},e))}).orNull()),Object(ee.checkNormalizedPhotoWithBasicInfoHasSearchTags)(a)&&(t=a.photo_tags,o.a.createElement("div",{className:ae.a.tagsContainerWrapper},o.a.createElement(te.a,{tags:t,takeN:3,emplacement:X.a.PhotoSearchResult}))))},ie=function(e){var t=e.children,n=e.photo,a=e.shouldShowExtraInfo,r=e.extraInfoClassname;return o.a.createElement("figure",{itemProp:"image",itemScope:!0,itemType:"http://schema.org/ImageObject"},t,a&&re({photo:n,extraInfoClassname:r}))};ie.displayName="PhotoFigure";var ce=Object(v.a)(Object(J.a)(Object(l.connect)(function(e,t){return{photo:Object(K.b)(e,t.photoId),shouldShowExtraInfo:!Object($.h)(e)&&Object(Q.i)(t.location.pathname)}})(ie)),oe),se=n(1248),ue=n(1220),le=n(1273),de=n.n(le),pe=Object(V.a)(Y.a),he=function(e){var t=e.photo,n=e.preTabletGridLayout,a=e.enqueueUpdateFunction;return o.a.createElement("div",{className:de.a.photoContainer},o.a.createElement(ue.a,{photoId:t.id},o.a.createElement(ce,{photoId:t.id},o.a.createElement(se.a,{photoId:t.id},o.a.createElement(pe,Object.assign({shouldSetLinkItemProp:!0,itemProp:"thumbnailUrl",enqueueUpdateFunction:a,photoId:t.id,imgDimensions:t,containerClassName:de.a.photo,alt:S.a.of(t.description).orUndefined(),"data-test":"standard-photo-grid-multi-col-img"},Z({photo:t,preTabletLayout:n})))))))};he.displayName="MasonryPhoto";var me=Object(l.connect)(function(e,t){return{photo:Object(K.b)(e,t.photoId)}})(he),fe=n(1271),be=n.n(fe),ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ye=Object(b.a)()({shouldUseContainerPadding:!0});var ge=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderGrid=n.renderGrid.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),ve(t,[{key:"getGridData",value:function(){var e=this.props,t=e.photos,n=function(e){return Array.from({length:e}).map(function(){return function(){return{totalHeight:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,photos:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]}}()})}(e.gridCount);return t.forEach(function(e){var t=n[function(e){var t=0,n=e[0];return e.forEach(function(e,a){e.totalHeight<n.totalHeight&&(t=a,n=e)}),t}(n)];e.height&&e.width&&(t.totalHeight+=e.height/e.width,t.photos.push(e))}),n.map(function(e){return e.photos})}},{key:"renderGrid",value:function(e,t){var n=this.props,a=n.gridCount,r=n.preTabletGridLayout,i=n.enqueueUpdateFunction;return o.a.createElement("div",{key:t,ref:"MasonryGrid"+t,className:f()(be.a.Grid,3===a&&be.a.GridThree,2===a&&be.a.GridTwo,1===a&&be.a.GridOne)},e.map(function(e,t){return o.a.createElement(me,{photoId:e.id,key:t,preTabletGridLayout:r,enqueueUpdateFunction:i})}))}},{key:"render",value:function(){var e=this.props,t=e.shouldUseContainerPadding,n=e.gridCount,a=this.getGridData().map(this.renderGrid);return o.a.createElement("div",{id:"gridMulti","data-test-masonry-grid-count":n,className:f()(be.a.container,t&&be.a.containerWithPadding),"data-test":"photos-grid-view"},a)}}]),t}();ge.displayName="Masonry";var _e=C(Object(v.a)(ge,ye)),Oe=n(421),we=n.n(Oe),je=i()({Two:Object(r.ofType)(),Three:Object(r.ofType)()}),Ee=je.match({Two:function(){return 2},Three:function(){return 3}}),Ie=h.a.match({Phone:function(){return je.Two({})},Tablet:function(){return je.Two({})},Desktop:function(){return je.Three({})}}),Te=je.match({Two:function(){return we.a.showUntilSmMax},Three:function(){return we.a.showFromMdMin}}),ke=i()({Enhanced:Object(r.ofType)(),Unenhanced:Object(r.ofType)()}),Ce=Object(d.createSelector)(function(e,t){return t.renderType},h.h,function(e,t){return p.a.match({Enhanced:function(){return ke.Enhanced({windowWidth:S.a.of(t).get()})},Unenhanced:function(){return ke.Unenhanced({})}})(e)}),Se=Object(d.createStructuredSelector)({masonryWrapperRenderType:Ce}),Ne=Object(p.b)(Object(l.connect)(Se)(function(e){var t=e.photos,n=e.shouldUseContainerPadding,a=e.preTabletGridLayout,r=e.masonryWrapperRenderType,i=function(e){var r=e.gridCount,i=e.isUnenhanced?Te(r):void 0,c=Ee(r);return o.a.createElement("div",{className:i,key:c},o.a.createElement(_e,{photos:t,gridCount:c,preTabletGridLayout:a,shouldUseContainerPadding:n}))},c=u()(h.c,Ie,function(e){return i({gridCount:e,isUnenhanced:!1})}),s=ke.match({Enhanced:function(e){var t=e.windowWidth;return c(t)},Unenhanced:function(){return[je.Two({}),je.Three({})].map(function(e){return i({gridCount:e,isUnenhanced:!0})})}})(r);return o.a.createElement("div",null,s)})),Pe=n(1645),Le=n(1215),xe=n(1214),De=n(1213),Re=n(1205),Ue=n(1204),Be=n.n(Ue),Fe=Object(V.a)(Y.a),Ae=function(e){var t=e.photo,n=e.preTabletGridLayout,a=e.enqueueUpdateFunction,r=Z({photo:t,preTabletLayout:n});return o.a.createElement(Fe,Object.assign({enqueueUpdateFunction:a,photoId:t.id,imgDimensions:t,containerClassName:Be.a.photo,alt:S.a.of(t.description).orUndefined(),"data-test":"standard-photo-grid-single-col-img"},r))};Ae.displayName="PhotoImage";var Me=Ae,We=n(1217),Ge=Object(d.createSelector)(K.b,function(e){return Object(We.a)({photo:e,className:Be.a.secondaryLabel}).orUndefined()}),He=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),He(t,[{key:"renderLikeButton",value:function(){var e=this.props,t=e.location,n=e.photo;return o.a.createElement(De.a,{photoId:n.id,location:t})}},{key:"renderAddToCollectionButton",value:function(){var e=this.props,t=e.location,n=e.photo;return o.a.createElement("div",{className:Be.a.collectionButtonContainer},o.a.createElement(Le.a,{photoId:n.id,location:t}))}},{key:"renderleftActions",value:function(){return o.a.createElement("div",{className:Be.a.leftActions},this.renderLikeButton(),this.renderAddToCollectionButton())}},{key:"renderRightActions",value:function(){var e=this.props.photo;return o.a.createElement("div",{className:Be.a.rightActions},o.a.createElement(xe.a,{photoId:e.id,showLabel:!0}))}},{key:"renderPhotoInfo",value:function(){return o.a.createElement("div",{className:Be.a.photoInfo},this.renderleftActions(),this.renderRightActions())}},{key:"renderTopUserLink",value:function(){var e=this.props,t=e.user,n=e.secondaryLabel;return o.a.createElement("div",{className:Be.a.userTopLink},o.a.createElement(Re.a,{includeAvatar:!0,userId:t.id,secondaryLabel:n,type:"emphasiseUsername"}))}},{key:"render",value:function(){var e=this.props,t=e.photo,n=e.preTabletGridLayout,a=e.enqueueUpdateFunction;return o.a.createElement("div",{className:Be.a.container,"data-test":"photo-component"},o.a.createElement(ue.a,{photoId:t.id},o.a.createElement(ce,{photoId:t.id,extraInfoClassname:Be.a.extraInfoClassname},this.renderTopUserLink(),o.a.createElement(Me,{photo:t,preTabletGridLayout:n,enqueueUpdateFunction:a}),this.renderPhotoInfo())))}}]),t}();qe.displayName="Photo";var ze=Object(Pe.a)(Object(l.connect)(function(e,t){return{photo:Object(K.b)(e,t.photoId),user:Object(K.e)(e,t.photoId),secondaryLabel:Ge(e,t.photoId)}})(qe)),Ze=n(1268),Ve=n.n(Ze),Ke=function(e){var t=e.photos,n=e.preTabletGridLayout,a=e.enqueueUpdateFunction;return o.a.createElement("div",{id:"gridSingle",className:Ve.a.container,"data-test":"photos-list-view"},t.map(function(e){return o.a.createElement(ze,{key:e.id,photoId:e.id,preTabletGridLayout:n,enqueueUpdateFunction:a})}))};Ke.displayName="PhotosListView";var Ye=C(Ke),Je=i()({Enhanced:Object(r.ofType)(),Unenhanced:Object(r.ofType)()}),Xe=Object(d.createSelector)(h.d,h.a.match({Phone:function(){return c.single({})},Tablet:function(){return c.multi({})},Desktop:function(){return c.multi({})}})),Qe=Object(d.createSelector)(function(e,t){return t.renderType},Xe,function(e,t){return p.a.match({Enhanced:function(){return Je.Enhanced({gridLayout:t})},Unenhanced:function(){return Je.Unenhanced({})}})(e)}),$e=function(e){var t=e.responsive.multi,n=e.photos,a=e.componentRenderType,r=c.single({}),i=function(){return o.a.createElement(Ye,{photos:n,preTabletGridLayout:r})},s=function(){return o.a.createElement(Ne,Object.assign({photos:n,preTabletGridLayout:r},t))},u=function(e){var t=e.gridLayout,n=e.className,a=void 0===n?void 0:n;return o.a.createElement("div",{className:a,key:t.tag},c.match({multi:s,single:i})(t))},l=Je.match({Enhanced:function(e){var t=e.gridLayout;return u({gridLayout:t})},Unenhanced:function(){return[c.single({}),c.multi({})].map(function(e){return u({gridLayout:e,className:function(e){var t=e.gridLayout;return c.match({single:function(){return we.a.showUntilXsMax},multi:function(){return we.a.showFromSmMin}})(t)}({gridLayout:e})})})}})(a);return o.a.createElement("div",null,l)};$e.displayName="Responsive";var et=Object(d.createStructuredSelector)({componentRenderType:Qe}),tt=Object(p.b)(Object(l.connect)(et)($e)),nt=i()({Multi:Object(r.ofType)(),Responsive:Object(r.ofType)()}),at=function(e){var t=e.mode,n=e.photos;return nt.match({Multi:function(e){var t=c.multi({});return o.a.createElement(Ne,Object.assign({photos:n,preTabletGridLayout:t},e))},Responsive:function(e){return o.a.createElement(tt,{photos:n,responsive:e})}})(t)};at.displayName="StandardPhotoGrid";var ot=at;n.d(t,"a",function(){return nt}),n.d(t,"b",function(){return ot})},1268:function(e,t,n){e.exports={"--xs-max":"(--xs-max)",container:"_1I8cs"}},1271:function(e,t,n){e.exports={floatLeft:"_2T3hc","--sm-min":"(--sm-min)",clearfix:"_2TNYr",container:"_3_WtK _2TNYr",containerWithPadding:"_1C-lZ",Grid:"_1OvAL _2T3hc",GridThree:"_27nWV",GridTwo:"_1eGVY",GridOne:"_3nHtz"}},1273:function(e,t,n){e.exports={colorLightGrey:"#ddd",photoContainer:"_1pn7R",photo:"_5nYwn"}},1275:function(e,t,n){e.exports={image:"_2ddqJ"}},1277:function(e,t,n){e.exports={fontWeightNormal:"_27Bp2",gutter:"16px",photoDescription:"_3IsQW _27Bp2",tagsContainerWrapper:"_1e5oT",extraInfoContainer:"_3mv5-"}},1278:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(139),r=n(35),i=n(87),c=n(206),s=n(1223),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return a(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new c.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=c.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return s.refCount()(this)},t}(r.Observable);t.ConnectableObservable=u;var l=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};var d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return a(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.SubjectSubscriber),p=(function(){function e(e){this.connectable=e}e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var a=new p(e,n),o=t.subscribe(a);return a.closed||(a.connection=n.connect()),o}}(),function(e){function t(t,n){e.call(this,t),this.connectable=n}return a(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,a=e._connection;this.connection=null,!a||n&&a!==n||a.unsubscribe()}}else this.connection=null},t}(i.Subscriber))},1279:function(e,t,n){"use strict";var a=n(1278);t.multicast=function(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new o(r,t));var i=Object.create(n,a.connectableObservableDescriptor);return i.source=n,i.subjectFactory=r,i}};var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,a=this.subjectFactory(),o=n(a).subscribe(e);return o.add(t.subscribe(a)),o},e}();t.MulticastOperator=o},1280:function(e,t,n){"use strict";var a=n(628),o=n(627);t.async=new o.AsyncScheduler(a.AsyncAction)},1281:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(87),r=n(1280);t.debounceTime=function(e,t){return void 0===t&&(t=r.async),function(n){return n.lift(new i(e,t))}};var i=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))},e}(),c=function(e){function t(t,n,a){e.call(this,t),this.dueTime=n,this.scheduler=a,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(s,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(o.Subscriber);function s(e){e.debouncedNext()}},1282:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(141),r=n(140);t.buffer=function(e){return function(t){return t.lift(new i(e))}};var i=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.closingNotifier))},e}(),c=function(e){function t(t,n){e.call(this,t),this.buffer=[],this.add(r.subscribeToResult(this,n))}return a(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,a,o){var r=this.buffer;this.buffer=[],this.destination.next(r)},t}(o.OuterSubscriber)},1298:function(e,t,n){"use strict";var a,o=n(3),r=n(0),i=n.n(r),c=n(14),s=n(967),u=n(418),l=n(13),d=n(169),p=n(81),h=n(18),m=n(16),f=n(40),b=n(32),v=n(26),y=n(422),g=n(1206),_=n(428),O=n(415),w=n(419),j=n(63),E=n(1262),I=n.n(E),T=Object(O.g)(Object(O.c)({styles:I.a,className:"maxWidth",fallback:"200"}));!function(e){e.full="full",e.half="half"}(a||(a={}));var k=function(e){return e.urls.raw},C=function(e){return function(t){return{src:Object(j.d)(t)({w:T}),srcSet:Object(w.b)({baseUrl:t,width:T*function(e){switch(e){case a.full:return Object(O.f)(Object(O.c)({styles:I.a,className:"bigImagePercentage",fallback:"50%"}));case a.half:return Object(O.f)(Object(O.c)({styles:I.a,className:"smallImagePercentage",fallback:"50%"}))}}(e),getParams:o.a.none()})}}},S=function(e,t,n){return e.chain(function(e){return Object(m.c)(t,e)}).map(k).map(C(n))},N=Object(m.a)()({showUserInfo:!0}),P=function(e){var t=e.collection,n=e.isLoggedIn,r=e.showUserInfo,c=t.user,m=t.total_photos,f=t.preview_photos,b=t.private,O=t.tags,w=Object(l.a)(t),j=Object(d.b)(t),E=o.a.of(f),T=S(E,0,a.full),k=S(E,1,a.half),C=S(E,2,a.half),N=r?i.a.createElement("span",null," ","· Curated by"," ",n?i.a.createElement(s.a,{to:Object(p.c)(c)},c.name):c.name):null;return i.a.createElement("div",null,i.a.createElement("div",{className:I.a.aspectRatioWrapper},i.a.createElement("div",{className:I.a.collectionContainer},i.a.createElement(s.a,{to:{pathname:j},className:I.a.linkWrapper},i.a.createElement("div",{className:I.a.imagesContainer},T.map(function(e){var t=e.src,n=e.srcSet;return i.a.createElement(y.a,{role:"presentation",containerClassName:I.a.bigImageWrapper,className:I.a.image,src:t,srcSet:n})}).getOrElse(i.a.createElement("div",{className:I.a.bigImageWrapper})),i.a.createElement("div",{className:I.a.smallImagesContainer},k.map(function(e){var t=e.src,n=e.srcSet;return i.a.createElement(y.a,{role:"presentation",containerClassName:I.a.smallImageWrapper,className:I.a.image,src:t,srcSet:n})}).getOrElse(i.a.createElement("div",{className:I.a.smallImageWrapper})),C.map(function(e){var t=e.src,n=e.srcSet;return i.a.createElement(y.a,{role:"presentation",containerClassName:I.a.smallImageWrapper,className:I.a.image,src:t,srcSet:n})}).getOrElse(i.a.createElement("div",{className:I.a.smallImageWrapper})))),i.a.createElement("div",{className:I.a.titleContainer},b&&i.a.createElement("span",{className:I.a.isPrivateContainer},i.a.createElement(_.a,{className:I.a.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},i.a.createElement(v.a,{type:h.a.lock,className:I.a.iconPrivate}))),i.a.createElement("div",{className:I.a.title},w))),i.a.createElement("div",{className:I.a.description},m," photos",N))),i.a.createElement(g.a,{tags:O,takeN:3,emplacement:u.a.CollectionCard}))};P.displayName="CollectionCard";var L=Object(f.a)(Object(c.connect)(function(e,t){return{isLoggedIn:Object(b.h)(e)}})(P),N);n.d(t,"a",function(){return L})},1303:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(1298),i=n(1373),c=n.n(i),s=function(e){var t=e.collection;return o.a.createElement("div",{className:c.a.collectionContainer,"data-test":"collection-feed-card"},t?o.a.createElement(r.a,{collection:t}):o.a.createElement("div",null,o.a.createElement("div",{className:c.a.placeholderAspectRatioWrapper},o.a.createElement("div",{className:c.a.placeholderContainer},o.a.createElement("div",{className:c.a.placeholder}),o.a.createElement("div",{className:c.a.placeholderTextBox}),o.a.createElement("div",{className:c.a.placeholderTextBox2}))),o.a.createElement("div",{className:c.a.placeholderTextBox3})))};s.displayName="CollectionFeedCard";var u=s;n.d(t,"a",function(){return u})},1363:function(e,t,n){"use strict";t.__esModule=!0;var a,o=n(629),r=(a=o)&&a.__esModule?a:{default:a};t.default=r.default},1364:function(e,t,n){"use strict";t.__esModule=!0;var a=n(0);o(n(624)),o(n(623));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function(t){var n=(0,a.createFactory)(t);return function(t){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),a.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},a.prototype.render=function(){return n(this.props)},a}(a.Component)}}},1365:function(e,t,n){"use strict";t.__esModule=!0;var a=r(n(1364)),o=r(n(1363));r(n(624)),r(n(623));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return(0,a.default)(function(e,t){return!(0,o.default)(e,t)})(e)}},1371:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return i});var a=4,o=12,r=30,i=30},1373:function(e,t,n){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"12px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"_15M91",placeholderAspectRatioWrapper:"_2rCoL",placeholderContainer:"_3jSxL",placeholder:"_1X2ch _2VWD4",placeholderTextBox:"_3I0Nd _2VWD4",placeholderTextBox2:"mpqhr _2VWD4",placeholderTextBox3:"yxc4t _2VWD4",placeholderTextBox1:"_2pqeA _2VWD4"}},1379:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(239),i=n.n(r),c=n(0),s=n.n(c),u=n(1371),l=n(418),d=n(16),p=n(40),h=n(1206),m=n(1398),f=n.n(m),b=Object(d.a)()({keywords:[],headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1,maximumResultsCount:u.b}),v=function(e){var t=e.showHeading,n=e.keywords,a=e.hideOnMobile,r=e.headingCopy,c=e.maximumResultsCount,u=i()(n,c);return 0===u.length?s.a.createElement("div",null):s.a.createElement("div",{className:o()(f.a.container,a&&f.a.hideOnMobile)},t&&s.a.createElement("p",{className:f.a.heading},r),s.a.createElement(h.a,{tags:u,emplacement:l.a.Related}))};v.displayName="RelatedTags";var y=Object(p.a)(v,b);n.d(t,"a",function(){return y})},1398:function(e,t,n){e.exports={"--sm-min":"(--sm-min)",containerLayout:"PrOBO",containerPadding:"_1CR66",fontWeightNormal:"_27Bp2",container:"_3w_cF PrOBO _1CR66",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N"}},1403:function(e,t,n){"use strict";var a=n(0),o=n.n(a),r=n(14),i=n(16),c=n(40),s=n(130),u=n(1303),l=n(1436),d=n.n(l),p=Object(i.a)()({relatedCollectionIds:[]}),h=function(e){var t=e.relatedCollections,n=e.heading;return 0===t.length?null:o.a.createElement("div",null,o.a.createElement("div",{className:d.a.clearfix},o.a.createElement("p",{className:d.a.heading},n)),o.a.createElement("div",{className:d.a.flexFeed},t.map(function(e,t){return o.a.createElement(u.a,{key:t,collection:e})})))};h.displayName="RelatedCollections";var m=Object(c.a)(Object(r.connect)(function(e,t){return{relatedCollections:Object(s.c)(e,t.relatedCollectionIds)}})(h),p);n.d(t,"a",function(){return m})},1406:function(e,t,n){"use strict";var a=n(174),o=n.n(a),r=n(9),i=n.n(r),c=n(0),s=n.n(c),u=n(18),l=n(186),d=n(441),p=n(26),h=n(1432),m=n.n(h),f=function(e){return s.a.createElement(l.b,Object.assign({},e,{className:m.a.shareLink,buttonType:"outline"}),(t={buttonShareType:e.type},n=t.buttonShareType,l.a.match({email:function(){return s.a.createElement(p.a,{type:u.a.email,className:m.a.emailShareLinkIcon})},facebook:function(){return s.a.createElement(p.a,{type:u.a.facebook,className:m.a.facebookShareLinkIcon})},twitter:function(){return s.a.createElement(p.a,{type:u.a.twitter,className:m.a.twitterShareLinkIcon})},pinterest:function(){return s.a.createElement(p.a,{type:u.a.pinterest,className:m.a.pinterestShareLinkIcon})}})(n)),s.a.createElement("span",{className:m.a.shareLinkText},o()(e.type.tag)));var t,n},b=function(e){var t=e.title,n=e.buttonsShareProps,a=e.link;return s.a.createElement("div",null,s.a.createElement("div",{className:m.a.container},s.a.createElement("div",{className:m.a.cell},s.a.createElement("h2",{className:m.a.title},"Share"),s.a.createElement("span",{className:m.a.subtitle},t)),s.a.createElement("div",{className:i()(m.a.halfCell,m.a.shareLinks)},n.map(function(e){return s.a.createElement("div",{key:e.type.tag,className:i()(m.a.halfCell,m.a.shareLinkContainer)},f(e))})),s.a.createElement("div",{className:m.a.cell},s.a.createElement(d.a,{buttonText:"Copy link"},a))))};b.displayName="ShareModalContent";var v=b;n.d(t,"a",function(){return v})},1407:function(e,t,n){"use strict";var a=n(9),o=n.n(a),r=n(3),i=n(0),c=n.n(i),s=n(18),u=n(414),l=n(30),d=n(26),p=n(1434),h=n.n(p),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["PureComponent"]),m(t,[{key:"getInitialState",value:function(){var e=this,t=this.props.renderType;return{maybeShareFunction:u.a.match({Enhanced:function(){return r.a.some(window)},Unenhanced:function(){return r.a.none()}})(t).chain(function(e){return void 0!==e.navigator.share?r.a.some(function(t){return e.navigator.share(t)}):r.a.none()}).map(function(t){var n=e.props.shareOptions;return function(){return t(n)}})}}},{key:"renderContent",value:function(){return c.a.createElement("div",{className:h.a.flexContainer},c.a.createElement(d.a,{className:h.a.icon,type:s.a.share}),c.a.createElement("span",{className:h.a.text},"Share"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.shareLocationDescriptor,a=t.className,r=this.state.maybeShareFunction,i={className:o()(h.a.flexContainer,a),buttonType:"outline",buttonSize:"small"};return r.map(function(t){return c.a.createElement(l.a,Object.assign({tag:"button",onClick:t},i),e.renderContent())}).getOrElseL(function(){return c.a.createElement(l.a,Object.assign({tag:"link",to:n},i),e.renderContent())})}}]),t}(),b=Object(u.b)(f);n.d(t,"a",function(){return b})},1415:function(e,t,n){e.exports={colorGrey:"#999",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u",secondaryLabel:"_2cSl3"}},1423:function(e,t,n){"use strict";var a;function o(e){var t=e.width,n=e.height;return n>t?a.portrait:n<t?a.landscape:a.square}function r(e){return o(e)===a.landscape}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),function(e){e.portrait="portrait",e.landscape="landscape",e.square="square"}(a||(a={}));var i=function(e){var t=o(e);return t===a.square||t===a.portrait}},1426:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(0),o=n.n(a),r=n(14),i=n(99),c=n(168),s=function(e){var t=function(t){return o.a.createElement(e,Object.assign({},t,{photos:t.photos}))};t.displayName="MapPhotoIdsToPhotos("+Object(i.a)(e)+")";return Object(r.connect)(function(){var e=Object(c.g)();return function(t,n){return{photos:e(t,n.photoIds)}}})(t)}},1432:function(e,t,n){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_2VlB5",cell:"_1dPrd",halfCell:"_201D8",title:"_32uh- _27Bp2",subtitle:"_2B7-n",shareLinks:"_3E7sP",shareLinkContainer:"_1J04C",shareLink:"_2SPjs",shareLinkIcon:"_2U6YH",facebookShareLinkIcon:"_272Go _2U6YH",twitterShareLinkIcon:"_1tkzW _2U6YH",pinterestShareLinkIcon:"ZO3Vz _2U6YH",emailShareLinkIcon:"_2L646 _2U6YH",shareLinkText:"_1Wr08"}},1434:function(e,t,n){e.exports={spacingUnit:"4px",flexContainer:"_10F2J",icon:"_1xhtJ",text:"_3UPwX"}},1436:function(e,t,n){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_33G6- _2npM8",heading:"_2gjZV _33G6- _2npM8",flexFeed:"_3b8t6"}},1444:function(e,t,n){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",centerItem:"_3mCZ_",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3mCZ_",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1492:function(e,t,n){e.exports={spacingUnit:"4px",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",container:"_1OFta",cell:"_1EBGx"}},1494:function(e,t,n){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},1496:function(e,t,n){e.exports={modalContent:"_29NeT"}},1498:function(e,t,n){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},1500:function(e,t,n){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_1zDIT _2npM8",heading:"_1-q17 _2npM8 _27Bp2"}},1504:function(e,t,n){e.exports={smallFontSize:"12px",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",spacingUnit:"4px",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",resetBtn:"DWLeW",container:"_1ltEq",cell:"_3dxKb",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",button:"_3JXJ6",buttonIcon:"_1rYbs",buttonText:"_1efgd",smallButton:"ldOpn"}},1506:function(e,t,n){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},1508:function(e,t,n){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1509:function(e,t){
/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");function n(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}return void 0===(t=t||{}).separator?t.separator=", ":n("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":n("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1510:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(87);t.scan=function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(a){return a.lift(new r(e,t,n))}};var r=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.accumulator,this.seed,this.hasSeed))},e}(),i=function(e){function t(t,n,a,o){e.call(this,t),this.accumulator=n,this._seed=a,this.hasSeed=o,this.index=0}return a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(o.Subscriber)},1511:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(87);t.mapTo=function(e){return function(t){return t.lift(new r(e))}};var r=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.value))},e}(),i=function(e){function t(t,n){e.call(this,t),this.value=n}return a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(o.Subscriber)},1512:function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function a(){this.constructor=e}e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)},o=n(87);t.count=function(e){return function(t){return t.lift(new r(e,t))}};var r=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new i(e,this.predicate,this.source))},e}(),i=function(e){function t(t,n,a){e.call(this,t),this.predicate=n,this.source=a,this.count=0,this.index=0}return a(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(o.Subscriber)},1513:function(e,t,n){"use strict";var a=n(632),o=n(632);t.concatStatic=o.concat,t.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(a.concat.apply(void 0,[t].concat(e)))}}},1514:function(e,t,n){var a=n(173),o=NaN;e.exports=function(e){return"number"==typeof e?e:a(e)?o:+e}},1515:function(e,t,n){var a=n(1514),o=n(663);e.exports=function(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=o(n),r=o(r)):(n=a(n),r=a(r)),i=e(n,r)}return i}}},1516:function(e,t,n){var a=n(1515)(function(e,t){return e+t},0);e.exports=a},1517:function(e,t,n){"use strict";var a=n(35),o=n(630);a.Observable.of=o.of},660:function(e,t,n){"use strict";n.r(t);n(1517);var a=n(3),o=n(1516),r=n.n(o),i=n(1),c=n.n(i),s=n(0),u=n.n(s),l=n(14),d=n(35),p=n(483),h=n(1513),m=n(1512),f=n(463),b=n(86),v=n(1511),y=n(661),g=n(1510),_=n(1264),O=n(462),w=n(465),j=n(209),E=n(139),I=n(11),T=n(39),k=n(17),C=n(69),S=n(417),N=n(22),P=n(70),L=n(414),x=n(32),D=n(168),R=n(461),U=n(6),B=n(41),F=n(246),A=n(227),M=n(9),W=n.n(M),G=n(416),H=n.n(G),q=n(1365),z=n.n(q),Z=n(169),V=n(1509),K=n.n(V),Y=n(174),J=n.n(Y),X=n(138),Q=n.n(X),$=n(239),ee=n.n($),te=n(1371);function ne(e){var t=ee()(e,te.c).map(function(e){return e.title});return K()(t)}function ae(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).cleanVersion,a=void 0!==n&&n,o=[a?"Download this photo":"Download this free HD photo"];if(t.tags&&!a){var r=ne(t.tags);o.push("of",r)}if(Q()(t,"location.city")||Q()(t,"location.country")){var i=[t.location.city,t.location.country].filter(function(e){return!!e}).join(", ");o.push("in "+i)}return o.push("by "+e.name+" (@"+e.username+")"),o.join(" ")}function oe(e){var t=e.user,n=function(e,t){var n=Q()(t,"story.title"),a="photo by "+e.name+" (@"+e.username+") on Unsplash";if(n)return J()(n+" "+a);if(t.tags){var o=ne(t.tags);return J()(o+" HD "+a)}return"HD "+a}(t,e),a=ae(t,e),o=function(e){var t=e.id,n=e.slug;return"https://unsplash.com/photos/"+(n?t+"/"+n:t)}(e),r=ae(t,e,{cleanVersion:!0});return{title:n,description:a,canonicalUrl:o,meta:Object(Z.f)(t,e,n,a,r,o)}}var re=n(420),ie=n(1220),ce=n(967),se=n(111),ue=n(18),le=n(319),de=n(30),pe=n(26),he=n(1407),me=n(125),fe=n(8),be=n(1508),ve=n.n(be),ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ge=Object(fe.unionize)({NotRequired:Object(fe.ofType)(),Truncated:Object(fe.ofType)(),Expanded:Object(fe.ofType)()}),_e=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateRef=function(e){n.textElRef=e},n.state=n.getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["PureComponent"]),ye(t,[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e,t,n=this,o=(t=a.a.of(n.textElRef).get(),(e=t).offsetWidth<e.scrollWidth);this.setState({doesRequireTruncation:o,shouldForceTruncation:!1})}},{key:"render",value:function(){var e,t,n,o,r,i,c,s=this.props,l=s.text,d=s.containerClassNameTruncated,p=s.containerClassNameExpanded,h=s.containerClassNameTruncationNotRequired,m=(e=this.props,t=this.state,n=e.onRequestToggle,o=e.shouldTruncateIfRequired,r=e.shouldShowTruncateButtonWhenExpanded,i=t.doesRequireTruncation,c=t.shouldForceTruncation,i?c||o?ge.Truncated({onRequestToggle:n}):ge.Expanded({onRequestToggle:n,shouldShowTruncateButton:r}):ge.NotRequired({})),f=ge.match({Truncated:function(e){var t=e.onRequestToggle;return a.a.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?a.a.some({buttonText:"Show less",onRequestToggle:t}):a.a.none()},NotRequired:function(){return a.a.none()}})(m);return u.a.createElement("div",{className:W()(ve.a.container,ge.match({Truncated:function(){return[ve.a.containerTruncated,d]},Expanded:function(){return[p]},NotRequired:function(){return[h]}})(m))},u.a.createElement("p",{ref:this.updateRef,className:W()(ve.a.text,ge.match({Truncated:function(){return ve.a.textTruncated}},function(){return ve.a.textNotTruncated})(m))},l)," ",f.map(function(e){var t=e.buttonText,n=e.onRequestToggle;return u.a.createElement("button",{className:ve.a.toggleButton,onClick:n},t)}).orUndefined())}}]),t}();_e.displayName="TruncatedTextToggle";var Oe=_e,we=n(1506),je=n.n(we),Ee=Object(me.progressivelyEnhance)(function(e){var t=e.description,n=e.shouldTruncate,a=e.onRequestToggleTruncation;return u.a.createElement(Oe,{key:t,text:t,containerClassNameTruncationNotRequired:je.a.descriptionTruncationNotRequired,containerClassNameExpanded:je.a.descriptionExpanded,containerClassNameTruncated:je.a.descriptionTruncated,shouldTruncateIfRequired:n,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:a})}),Ie=n(1504),Te=n.n(Ie),ke=function(e){return u.a.createElement("div",{className:Te.a.textContainerItem},e)},Ce=function(e){var t=e.photo,n=e.location,o=e.shouldTruncateDescription,r=e.onRequestToggleTruncatedDescription,i={pathname:Object(A.c)({photoId:t.id}),state:n.state},c={pathname:Object(A.d)({photoId:t.id}),state:n.state},s=Object(B.checkDenormalizedPhotoHasFullInfo)(t)?a.a.of(t.story.description):a.a.none(),l=Object(B.checkDenormalizedPhotoHasFullInfo)(t)?a.a.of(t.location).map(function(e){return e.title}):a.a.none(),d={url:t.links.html,title:a.a.of(t.description).getOrElse(""),text:Object(le.b)(t.user)};return u.a.createElement("div",{className:Te.a.container},u.a.createElement("div",{className:Te.a.textContainer},l.map(function(e){return u.a.createElement(ce.a,{to:Object(se.b)(e),className:Te.a.locationLink},u.a.createElement(pe.a,{type:ue.a.location,className:Te.a.locationIcon}),u.a.createElement("span",{className:Te.a.locationTitle},e))}).map(ke).orUndefined(),s.map(function(e){return u.a.createElement(Ee,{description:e,shouldTruncate:o,onRequestToggleTruncation:r})}).map(ke).orUndefined()),u.a.createElement("div",{className:Te.a.cell},u.a.createElement(he.a,{shareLocationDescriptor:c,shareOptions:d,className:Te.a.smallButton})),u.a.createElement("div",{className:Te.a.cell},u.a.createElement(de.a,{className:Te.a.button,tag:"link",buttonType:"outline",buttonSize:"small",to:i},u.a.createElement(pe.a,{className:Te.a.buttonIcon,type:ue.a.info}),u.a.createElement("span",{className:Te.a.buttonText},"Info"))))};Ce.displayName="Footer";var Se=Ce,Ne=n(1215),Pe=n(1214),Le=n(1213),xe=n(1205),De=n(12),Re=n(1217),Ue=n(1202),Be=n(1415),Fe=n.n(Be),Ae=Object(De.createSelector)(function(e,t){return t},function(e){return Object(Re.a)({photo:e,className:Fe.a.secondaryLabel}).getOrElse(Ue.a.Username({}))}),Me=Object(l.connect)(function(e,t){return{secondaryLabel:Ae(e,t.photo)}})(function(e){var t=e.className,n=e.location,a=e.photo,o=e.isLoggedIn,r=e.secondaryLabel,i=o?void 0:"green",c=o?"Download":"Download free";return u.a.createElement("header",{className:W()(t,Fe.a.container)},u.a.createElement("div",{className:Fe.a.photographer},u.a.createElement(xe.a,{includeAvatar:!0,userId:a.user.id,secondaryLabel:r,type:"emphasiseUsername"})),u.a.createElement("div",{className:Fe.a.actions},u.a.createElement("div",{className:Fe.a.buttonCell},u.a.createElement(Le.a,{photoId:a.id,location:n})),u.a.createElement("div",{className:Fe.a.buttonCell},u.a.createElement(Ne.a,{photoId:a.id,location:n})),u.a.createElement("div",{className:Fe.a.downloadButtonCell},u.a.createElement(Pe.a,{photoId:a.id,showLabel:!0,type:i,label:c,className:Fe.a.downloadButton}))))}),We=n(419),Ge=n(1219),He=n(5),qe=n.n(He),ze=n(13),Ze=n(415),Ve=n(144),Ke=n(1423),Ye=n(1444),Je=n.n(Ye);function Xe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Qe=Object(fe.unionize)({Unenhanced:Object(fe.ofType)(),Enhanced:Object(fe.ofType)()}),$e=function(e){var t=e.magicalVerticalOffset,n=function(){var e=Object(Ze.e)(10),n=20+t,a=Object(Ze.g)(Be.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*a,TOTAL_VERTICAL_PADDING:n,HORIZONTAL_PADDING_LENGTH:Object(Ze.e)(a),VERTICAL_PADDING_LENGTH:e}},o=Object(Ze.i)(1),r=n(),i=r.TOTAL_HORIZONTAL_PADDING,c=r.TOTAL_VERTICAL_PADDING,s=function(){var e=n(),t=e.TOTAL_HORIZONTAL_PADDING,a=e.TOTAL_VERTICAL_PADDING;return{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:Object(Ze.a)(o+" - "+Object(Ze.e)(t)),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:Object(Ze.a)("100vh - "+Object(Ze.e)(a))}}(),u=s.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,l=s.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,d=function(e){var t,n=e.photoDimensions;if(Object(Ke.b)(n)){var a=n.width/n.height;return t=500,Math.ceil(t*a)}return 500},p=function(e){var t,n=e.photoDimensions,a=n.width/n.height,o=d({photoDimensions:n});return{minWidthLength:Object(Ze.e)(o),maxWidthLength:(t=l,Object(Ze.a)("("+t+") * "+Object(Ve.d)(a)))}},h=function(e){var t=e.photoDimensions;if(e.isZoomedOut){var n=p({photoDimensions:t}),a=n.minWidthLength,r=n.maxWidthLength,s=function(e){var t,n=e.photoDimensions,a=n.width,o=n.height,r=o/a,s=d({photoDimensions:n}),u=(t=s,Math.ceil(t*r));return{isMinSizeMediaConditions:["(max-width: "+Object(Ze.e)(s+i)+")","(max-height: "+Object(Ze.e)(u+c)+")"],isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: "+a+"/"+o+")"}}({photoDimensions:t}),l=s.isMinSizeMediaConditions,h=s.isConstrainedByViewportHeightMediaCondition;return[].concat(Xe(l.map(function(e){return{mediaCondition:e,width:a}})),[{mediaCondition:h,width:r},{width:u}])}return[{width:o}]},m=qe()(function(e){var t=e.photoDimensions,n=e.zoomableOptions;return[].concat(Xe([{mediaCondition:Ye.isFixedMediaCondition,width:o}]),Xe(h({photoDimensions:t,isZoomedOut:n.isZoomedOut})))},We.d);return{getPaddingConstants:n,getImgSrcSetString:function(e){var t=e.photoDimensions,n=e.baseUrl,o=t.width,r=function(e){var t,n=e.photoDimensions,a=n.width,o=a/n.height;return{lowerBound:(t=500,Math.ceil(t*o)),upperBound:a}}({photoDimensions:t}),i=r.lowerBound,c=r.upperBound;return Object(We.c)({baseUrl:n,lowerBound:i,upperBound:c,originalWidth:o,interval:300,getParams:a.a.some(function(){return{q:80}})})},getMinAndMaxWidthsLengths:p,getImgSizesString:m,createFallbackSrc:function(e){return Object(ze.b)({url:e,width:String(1e3),q:"80"})}}},et=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var tt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderZoomableImageOverlay=function(e){var t=e.isZoomedOut?ue.a.zoomIn:ue.a.zoomOut;return u.a.createElement("div",{className:Je.a.overlay},u.a.createElement("div",{className:Je.a.overlayChild},u.a.createElement(pe.a,{type:t,className:Je.a.zoomToggleIcon})))},n.renderImage=function(){var e=n.props,t=e.photo,o=e.maybeInitialSrc,r=e.onImgLoad,i=e.magicalVerticalOffset,c=e.renderType,s=n.state.shouldUseInitialSrcIfAvailable,l=t.urls.raw,d=$e({magicalVerticalOffset:i}),p=d.getImgSizesString,h=d.getImgSrcSetString,m=d.createFallbackSrc,f={width:t.width,height:t.height},b=p({zoomableOptions:c.zoomable,photoDimensions:f}),v=function(){return h({photoDimensions:f,baseUrl:l})},y=s?o.map(function(e){return Object(We.e)([{url:e}])}).getOrElseL(v):v(),g=m(l);return u.a.createElement(Ge.a,{imgDimensions:t,containerClassName:Je.a.imagePlaceholder,key:t.id,sizes:b,srcSet:y,onLoad:r,src:g,alt:a.a.of(t.description).orUndefined()})},n.renderZoomableImageButton=function(e){var t=e.isZoomedOut,a=e.onRequestToggleZoom,o=W()(Je.a.imageButton,t?Je.a.imageButtonZoomedOut:Je.a.imageButtonZoomedIn);return u.a.createElement("button",{className:o,onClick:a},n.renderZoomableImageOverlay(e),n.renderImage())},n.renderZoomableImageContainer=function(){var e=n.props,t=e.photo,a=e.magicalVerticalOffset,o=e.renderType,r=$e({magicalVerticalOffset:a}),i=r.getMinAndMaxWidthsLengths,c=r.getPaddingConstants,s=o.zoomable.isZoomedOut,l=c(),d=l.HORIZONTAL_PADDING_LENGTH,p=l.VERTICAL_PADDING_LENGTH,h=i({photoDimensions:{width:t.width,height:t.height}}),m=h.minWidthLength,f=h.maxWidthLength;return u.a.createElement("div",{style:s?{padding:p+" "+d}:{}},u.a.createElement("div",{style:s?{minWidth:m,maxWidth:f}:{},className:Je.a.imageContainer},Qe.match({Unenhanced:n.renderImage,Enhanced:function(e){return n.renderZoomableImageButton(e.zoomable)}})(o)))},n.state=n.getInitialState(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["PureComponent"]),et(t,[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){requestAnimationFrame(function(){e.disableInitialSrc()})})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:Je.a.isFixed},this.renderImage()),u.a.createElement("div",{className:Je.a.isZoomable},this.renderZoomableImageContainer()))}}]),t}(),nt=n(1403),at=n(1379),ot=n(1426),rt=n(1266),it=n(1500),ct=n.n(it),st=Object(ot.a)(rt.b),ut=rt.a.Multi({shouldUseContainerPadding:!1}),lt=function(e){var t=e.photoIdsRemoteData,n=function(e){var t=e.bodyPhotoIdsRemoteData;return u.a.createElement("div",null,u.a.createElement("div",{className:ct.a.clearfix},u.a.createElement("h4",{className:ct.a.heading},"Related photos")),u.a.createElement("div",{className:ct.a.contentContainer},function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case F.e.Reloading:case F.e.Success:return u.a.createElement(st,{photoIds:t.value,mode:ut});case F.e.Loading:return u.a.createElement(re.a,{padContentBelow:!1})}}({bodyPhotoIdsRemoteData:t})))};switch(t.type){case F.e.Reloading:case F.e.Loading:return n({bodyPhotoIdsRemoteData:t});case F.e.Success:return 0===t.value.length?null:n({bodyPhotoIdsRemoteData:t});case F.e.Failure:case F.e.NotAsked:return null}},dt=function(e){var t=e.type===B.RelatedCollectionsType.related?"Related collections":"Featured in "+e.total+" collections",n=e.results.map(function(e){return e.id});return u.a.createElement(nt.a,{relatedCollectionIds:n,heading:t})},pt=function(e){var t=e.photo,n=e.relatedPhotoIdsRemoteData,o=a.a.of(Object(B.checkDenormalizedPhotoHasFullInfo)(t)?t.related_collections:void 0),r=Object(B.checkDenormalizedPhotoHasFullInfo)(t)?a.a.some(t.tags):a.a.none();return u.a.createElement("div",null,u.a.createElement(lt,{photoIdsRemoteData:n}),o.map(dt).getOrElse(void 0),r.map(function(e){return u.a.createElement(at.a,{headingCopy:"Related tags",keywords:e,showHeading:!0})}).orUndefined())},ht=n(1498),mt=n.n(ht),ft=function(e){var t=e.location,n=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData,o=e.maybeMainImageInitialSrc,r=e.relatedPhotoIdsRemoteData,i=e.onMainImageLoad,c=e.shouldTruncateDescription,s=e.onRequestToggleTruncatedDescription,l=e.isLoggedIn,d=e.children,p=e.mainImageRenderType,h=function(e){var n=e.photo,a=oe(n),d=a.title,h=a.meta,m=a.canonicalUrl,f=Object(k.b)(t),b=f?155:200;return u.a.createElement("div",{className:mt.a.wrapper},u.a.createElement(H.a,{title:d,meta:h,link:Object(Z.d)(m)}),u.a.createElement("div",null,u.a.createElement("div",{className:W()(f&&mt.a.stickyHeaderContainer)},u.a.createElement(Me,{photo:n,location:t,isLoggedIn:l})),u.a.createElement(ie.a,{photoId:n.id},u.a.createElement(tt,{renderType:p,maybeInitialSrc:o,photo:n,onImgLoad:i,magicalVerticalOffset:b})),u.a.createElement(Se,{photo:n,location:t,shouldTruncateDescription:c,onRequestToggleTruncatedDescription:s})),u.a.createElement("div",{className:mt.a.container},u.a.createElement(pt,{photo:n,relatedPhotoIdsRemoteData:r})))};return function(e){return u.a.createElement("div",{"data-test":"photos-route"},e,d)}(n.filter(B.checkDenormalizedPhotoHasBasicInfo).map(function(e){return h({photo:e})}).getOrElseL(function(){switch(a.type){case F.e.Reloading:case F.e.Success:return h({photo:a.value});case F.e.Loading:return u.a.createElement("div",{className:mt.a.spinnerWrapper},u.a.createElement(re.a,{padContentBelow:!1}));case F.e.NotAsked:case F.e.Failure:return null}}))};ft.displayName="Photos";var bt,vt=z()(ft),yt=n(187),gt=n(1496),_t=n.n(gt),Ot=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",Object(ze.w)(e)].join(", ")}},wt=function(e){return function(e){var t=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc;return t.map(function(e){return Object(ze.b)({url:e,width:String(200),blur:String(20)})}).orElse(n)}({maybeRawPhotoUrl:e.maybeRawPhotoUrl,maybeMainImageCurrentSrc:e.maybeMainImageCurrentSrc}).map(Ot).orUndefined()},jt=function(e){var t=e.photoId,n=e.maybeRawPhotoUrl,a=e.maybeMainImageCurrentSrc,o=e.modalLocationState,r=e.children;return u.a.createElement(yt.a,{redirectTo:{pathname:"/photos/"+t},modalLocationState:o,contentStyles:wt({maybeRawPhotoUrl:n,maybeMainImageCurrentSrc:a}),contentClassName:_t.a.modalContent},r)},Et=n(21),It=n(49),Tt=function(e){return"ƒ/"+e},kt=function(e){return e+"s"},Ct=function(e){return e+"mm"},St=n(1494),Nt=n.n(St);!function(e){e[e.views=0]="views",e[e.downloads=1]="downloads",e[e.likes=2]="likes"}(bt||(bt={}));var Pt=function(){return u.a.createElement("div",{className:Nt.a.container},u.a.createElement("div",{className:Nt.a.cell},u.a.createElement(re.a,{padContentBelow:!1})))},Lt=function(e){var t=e.type,n=e.statRemoteData;return u.a.createElement("div",{className:Nt.a.stat},u.a.createElement("dt",{className:Nt.a.statLabel},u.a.createElement(pe.a,{type:function(e){switch(e){case bt.views:return ue.a.eyeThin;case bt.downloads:return ue.a.downloadArrowThin;case bt.likes:return ue.a.heartThin}}(t),className:Nt.a.statLabelIcon}),u.a.createElement("span",{className:Nt.a.statLabelText},function(e){switch(e){case bt.views:return"Views";case bt.downloads:return"Downloads";case bt.likes:return"Likes"}}(t))),function(e){var t=e.statRemoteData;switch(t.type){case F.e.Success:var n=t.value;return u.a.createElement("dd",{className:Nt.a.statValue},u.a.createElement("span",{className:Nt.a.statValueTotal},Object(ze.i)(n.total)),u.a.createElement("span",{className:Nt.a.statValueDelta},Object(ze.k)(n.historical.change)," since last month"));case F.e.Loading:return u.a.createElement("dd",{className:Nt.a.statValue},u.a.createElement("div",{className:Nt.a.statValueTotalPlaceholder}),u.a.createElement("div",{className:Nt.a.statValueDeltaPlaceholder}))}}({statRemoteData:n}))},xt=function(e){return u.a.createElement("dl",{key:"stats-body",className:Nt.a.stats},Lt({type:bt.views,statRemoteData:e.views}),Lt({type:bt.downloads,statRemoteData:e.downloads}),Lt({type:bt.likes,statRemoteData:e.likes}))},Dt=function(e){var t=e.maybeCachedPhotoStats,n=e.photoStatsRemoteData;return t.map(function(e){return xt({views:new F.f(e.views),downloads:new F.f(e.downloads),likes:new F.f(e.likes)})}).orElseL(function(){switch(n.type){case F.e.NotAsked:return a.a.none();case F.e.Failure:return a.a.some((n.value,u.a.createElement("div",{key:"stats-failure",className:Nt.a.container},u.a.createElement("div",{className:Nt.a.cell},u.a.createElement("p",{className:Nt.a.p},"Sorry, there was an error loading stats. Please try again later.")))));case F.e.Reloading:case F.e.Success:var e=n.value;return a.a.some(xt({views:new F.f(e.views),downloads:new F.f(e.downloads),likes:new F.f(e.likes)}));case F.e.Loading:return a.a.some(xt({views:new F.b,downloads:new F.b,likes:new F.b}))}})},Rt=function(e){var t=function(e){var t,n=e.photo;return[{name:"Camera Make",value:(t=n.exif.make,""!==t?t:void 0)},{name:"Camera Model",value:Object(Et.h)(n.exif.model)},{name:"Focal Length",value:Object(Et.f)(Ct,Object(Et.h)(n.exif.focal_length))},{name:"Aperture",value:Object(Et.f)(Tt,Object(Et.h)(n.exif.aperture))},{name:"Shutter Speed",value:Object(Et.f)(kt,Object(Et.h)(n.exif.exposure_time))},{name:"ISO",value:Object(Et.h)(n.exif.iso)},{name:"Dimensions",value:n.width+" × "+n.height}].map(function(e){var t=e.name,n=e.value;return{name:t,value:Object(Et.c)(function(){return"--"},n)}})}({photo:e.photo});return u.a.createElement("dl",{key:"metadata-body",className:Nt.a.metadata},t.map(function(e){var t=e.name,n=e.value;return u.a.createElement("div",{key:t,className:Nt.a.metadataItem},u.a.createElement("dt",{className:Nt.a.metadataItemName},t),u.a.createElement("dd",{className:Nt.a.metadataItemValue},n))}))},Ut=function(e){var t=e.cachedPhoto,n=e.photoFullInfoRemoteData;return Object(B.checkDenormalizedPhotoHasFullInfo)(t)?a.a.some(Rt({photo:t})):function(){switch(n.type){case F.e.Reloading:case F.e.Success:return a.a.some(Rt({photo:n.value}));case F.e.Loading:return a.a.some(u.a.createElement("div",{key:"loading"},Pt()));case F.e.NotAsked:return a.a.none();case F.e.Failure:return a.a.some((n.value,u.a.createElement("div",{key:"metadata-failure",className:Nt.a.container},u.a.createElement("div",{className:Nt.a.cell},u.a.createElement("p",{className:Nt.a.p},"Sorry, there was an error loading metadata. Please try again later.")))))}}()},Bt=function(e){var t=e.auth,n=e.photo,o=(a.a.of(t.user).exists(function(e){return e.username===n.user.username})?a.a.some("/account/photos"):t.isAdmin?a.a.some("/super/photos/"+n.id+"/edit"):a.a.none()).map(function(e){return{key:"edit-photo",component:u.a.createElement("a",{href:e},"Edit photo")}}),r=Object(Et.b)([o]);return r.length>0?a.a.some(u.a.createElement("div",{key:"other-links",className:Nt.a.containerFooter},r.map(function(e){var t=e.key,n=e.component;return u.a.createElement("div",{key:t,className:Nt.a.cell},n)}))):a.a.none()},Ft=function(e){var t=e.cachedPhoto,n=e.photoFullInfoRemoteData,o=e.photoStatsRemoteData,r=e.auth,i=Object(ze.h)(new Date(t.created_at)),c=Object(B.checkDenormalizedPhotoHasStats)(t)?a.a.some(t.stats):a.a.none(),s=Object(B.checkDenormalizedPhotoHasFullInfo)(t)?a.a.some(a.a.of(t.story.title).getOrElseL(function(){return"Info"})):a.a.none(),l=Object(Et.b)([Dt({maybeCachedPhotoStats:c,photoStatsRemoteData:o}),Ut({cachedPhoto:t,photoFullInfoRemoteData:n}),Bt({photo:t,auth:r})]);return u.a.createElement("div",null,u.a.createElement("div",{className:Nt.a.containerTitle},u.a.createElement("div",{className:Nt.a.cell},s.map(function(e){return u.a.createElement("h2",{className:Nt.a.title},e)}).orNull(),u.a.createElement("span",{className:Nt.a.datePublished},"Published on ",u.a.createElement("time",{dateTime:t.created_at},i)))),Object(It.f)(l,function(e){return u.a.createElement("hr",{key:"separator-"+e,className:Nt.a.hr})}))},At=Object(l.connect)(function(e,t){return{auth:Object(x.b)(e)}})(function(e){var t=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,a=e.photoStatsRemoteData,o=e.auth;return t.filter(B.checkDenormalizedPhotoHasBasicInfo).map(function(e){return Ft({cachedPhoto:e,photoStatsRemoteData:a,auth:o,photoFullInfoRemoteData:n})}).getOrElseL(function(){switch(n.type){case F.e.Reloading:case F.e.Success:return Ft({cachedPhoto:n.value,photoStatsRemoteData:a,auth:o,photoFullInfoRemoteData:n});case F.e.Loading:return Pt();case F.e.NotAsked:case F.e.Failure:return null}})}),Mt=function(e){var t=e.maybeCachedPhoto,n=e.photoId,a=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,i=e.modalLocationState,c=t.filter(B.checkDenormalizedPhotoHasBasicInfo).map(function(e){return e.urls.raw});return u.a.createElement(jt,{photoId:n,modalLocationState:i,maybeMainImageCurrentSrc:a,maybeRawPhotoUrl:c},u.a.createElement(At,{maybeCachedPhoto:t,photoFullInfoRemoteData:o,photoStatsRemoteData:r}))},Wt=n(52),Gt=n(63),Ht=n(15),qt=n(186),zt=n(1406),Zt=n(1492),Vt=n.n(Zt),Kt=function(e){var t=e.photo,n=t.links.html,a=function(e){return Object(Ht.m)(n,{utmSource:e,utmContent:Wt.g.PHOTOS_PAGE_SHARE})},o=Object(le.b)(t.user),r=Object(Gt.d)(t.urls.raw)({w:2e3}),i=[{url:a("facebook"),type:qt.a.facebook({})},{url:a("pinterest"),type:qt.a.pinterest({message:o,media:r})},{url:a("twitter"),type:qt.a.twitter({message:o})},{url:a("email"),type:qt.a.email({})}];return u.a.createElement(zt.a,{title:"Photo by "+t.user.name,buttonsShareProps:i,link:n})},Yt=function(e){var t=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData;return t.filter(B.checkDenormalizedPhotoHasBasicInfo).map(function(e){return Kt({photo:e})}).getOrElseL(function(){switch(n.type){case F.e.Reloading:case F.e.Success:return Kt({photo:n.value});case F.e.Loading:return u.a.createElement("div",{className:Vt.a.container},u.a.createElement("div",{className:Vt.a.cell},u.a.createElement(re.a,{padContentBelow:!1})));case F.e.NotAsked:case F.e.Failure:return null}})},Jt=function(e){var t=e.maybeCachedPhoto,n=e.photoId,a=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.modalLocationState;return u.a.createElement(jt,{photoId:n,modalLocationState:r,maybeMainImageCurrentSrc:a,maybeRawPhotoUrl:t.filter(B.checkDenormalizedPhotoHasBasicInfo).map(function(e){return e.urls.raw})},u.a.createElement(Yt,{maybeCachedPhoto:t,photoFullInfoRemoteData:o}))},Xt=Object(C.e)("photo"),Qt=function(e){return qe()(e.photos.getPhotoWithInfo,Object(b.map)(function(e){return new F.f(e)}))},$t=function(e){var t=e.value,n=Xt(t).entities;return[Object(I.qb)(n),I.a.UpdatePhotoFullInfoRemoteData({photoId:t.id,photoFullInfoRemoteData:e})]},en=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var tn=Object(C.e)("relatedPhotos"),nn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetNumberOfRequests=function(){n.resetNumberOfRequestsSubject.next({})},n.onRequestToggleTruncatedDescription=function(){var e=n.props.location;n.context.router.history.replace(Object(k.n)(function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}})(e))},n.state=n.getInitialState(),n.onRequestMainImageToggleZoom=n.onRequestMainImageToggleZoom.bind(n),n.onMainImageLoad=n.onMainImageLoad.bind(n),n.onRootRouteLeaveSubject=new E.Subject,n.onInfoRouteLeaveSubject=new E.Subject,n.requestSubject=new E.Subject,n.resetNumberOfRequestsSubject=new E.Subject,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s["PureComponent"]),en(t,[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:a.a.none()}}},{key:"getInitialState",value:function(){return this.getDefaultState()}},{key:"getResetState",value:function(){return this.getDefaultState()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.renderType;this.setupProgressBar(),L.a.is.Unenhanced(n)||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subroute===A.a.info&&this.fetchPhotoStatsThenCacheAndSet()}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props,a=n.match,o=n.maybePhoto,r=n.photoFullInfoRemoteData,i=n.photoStatsRemoteData,c=e.maybePhoto;a.params.id!==e.match.params.id?this.reset():c.forEach(function(e){o.map(function(t){return t!==e}).getOrElse(!0)&&(r.type===F.e.Success&&Object(B.checkDenormalizedPhotoHasFullInfo)(e)&&t.updatePhotoFullInfoRemoteData(new F.f(e)),i.type===F.e.Success&&Object(B.checkDenormalizedPhotoHasStats)(e)&&t.updatePhotoStatsRemoteData(new F.f(e.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.id,a=t.subroute,o=e.match.params,r=o.id,i=o.subroute;n!==r&&(this.cleanup(),this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet());var c=i===A.a.info,s=a===A.a.info;!c&&s?this.fetchPhotoStatsThenCacheAndSet():c&&!s&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){var e=this.requestSubject.asObservable(),t=this.props,n=t.hideProgressBar,a=t.showProgressBar;this.resetNumberOfRequestsSubject.asObservable().pipe(Object(O.startWith)({}),Object(w.switchMap)(function(){return e.pipe(Object(y.mergeMap)(function(e){var t=d.Observable.of({}),n=e.pipe(Object(m.count)());return t.pipe(Object(v.mapTo)(1),Object(h.concat)(n.pipe(Object(v.mapTo)(-1))))}),Object(g.scan)(r.a,0),Object(O.startWith)(0))})).pipe(Object(b.map)(function(e){return e>0}),Object(f.distinctUntilChanged)()).subscribe(function(e){e?a():n()})}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props,n=t.updatePhotoFullInfoRemoteData;n({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props,n=t.updateRelatedPhotoIdsRemoteData;n({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props,n=t.updatePhotoStatsRemoteData;n({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this.props,t=e.match,n=e.maybePhoto,a=e.setErrorFlash,o=e.dispatch,r=t.params.id,i=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new F.b);var c=Qt(T.a)({photoId:r}).pipe(Object(p.catchError)(function(e){return d.Observable.of(new F.a(e))}),Object(j.takeUntil)(this.onRootRouteLeaveSubject),Object(_.share)());c.subscribe(function(e){if(e.type===F.e.Failure)Object(U.d)(e.value)?a({message:"There was a network error. Please check your internet connection."}):(a({message:"There was a server error. Please try again later."}),n.isEmpty()&&Object(N.m)(i)(e.value));else{var t=$t(e);o(I.a.BatchActions({actions:t}))}}),this.requestSubject.next(c)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var e=this,t=this.props,n=t.match,a=t.updateData,o=t.relatedPhotoIdsRemoteData,r=n.params.id,i=function(){switch(o.type){case F.e.Reloading:case F.e.Success:return new F.d(o.value);case F.e.Failure:case F.e.Loading:case F.e.NotAsked:return new F.b}}();this.updateRelatedPhotoIdsRemoteData(i);var c=T.a.photos.getRelatedPhotos({photoId:r}).pipe(Object(b.map)(function(e){return{normalizedResponse:tn(e),remoteData:new F.f(e.results.map(function(e){return e.id}))}}),Object(p.catchError)(function(e){return d.Observable.of({normalizedResponse:void 0,remoteData:new F.a(e)})}),Object(j.takeUntil)(this.onRootRouteLeaveSubject),Object(_.share)());c.subscribe(function(t){var n=t.normalizedResponse,o=t.remoteData;void 0!==n&&a(n.entities),e.updateRelatedPhotoIdsRemoteData(o)}),this.requestSubject.next(c)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var e=this,t=this.props,n=t.match,a=t.updatePhotoStats,o=n.params.id;this.updatePhotoStatsRemoteData(new F.b);var r=T.a.photos.getPhotoStats({photoId:o}).pipe(Object(b.map)(function(e){return{response:e,remoteData:new F.f(e)}}),Object(p.catchError)(function(e){return d.Observable.of({response:void 0,remoteData:new F.a(e)})}),Object(j.takeUntil)(this.onInfoRouteLeaveSubject),Object(_.share)());r.subscribe(function(t){var n=t.response,r=t.remoteData;void 0!==n&&a(o,n),e.updatePhotoStatsRemoteData(r)}),this.requestSubject.next(r)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,n=e.trackZoomedInPhoto,a=e.trackZoomedOutPhoto,o=e.match.params.id;Object(k.k)({location:t}).zoomableMainImageOptions.isZoomedOut?n(o):a(o)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,n=e.pageModalScrollResetRequested,a=this.context.router.history;Object(k.b)(t)&&n(),a.replace(Object(k.n)(function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}})(t))}},{key:"onMainImageLoad",value:function(e){var t;this.setState({mainImageCurrentSrc:(t=e.currentTarget,a.a.of(t.currentSrc).filter(P.b).orElseL(function(){return a.a.of(t.src).filter(P.b)}))})}},{key:"renderChildRoute",value:function(){var e=this.props,t=e.match,n=e.location,o=e.maybePhoto,r=e.photoFullInfoRemoteData,i=e.photoStatsRemoteData,c=e.renderType,s=t.params.id,l=Object(k.h)(n),d=Object(k.k)({location:n}),p=a.a.of(d.initialSrc),h=t.params.subroute,m=!Object(k.d)(n)&&L.a.is.Enhanced(c);switch(h){case A.a.info:return l.filter(function(){return m}).map(function(e){return u.a.createElement(Mt,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:p,photoFullInfoRemoteData:r,photoStatsRemoteData:i})}).orUndefined();case A.a.share:return l.filter(function(){return m}).map(function(e){return u.a.createElement(Jt,{maybeCachedPhoto:o,photoId:s,modalLocationState:e,maybeMainImageCurrentSrc:p,photoFullInfoRemoteData:r})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,n=t.maybePhoto,o=t.location,r=t.isLoggedIn,i=t.photoFullInfoRemoteData,c=t.relatedPhotoIdsRemoteData,s=t.renderType,l=Object(k.k)({location:o}),d=l.shouldTruncateDescription,p=L.a.match({Unenhanced:function(){return Qe.Unenhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return Qe.Enhanced({zoomable:{isZoomedOut:l.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(s),h=a.a.of(l.initialSrc);return u.a.createElement(vt,{maybeCachedPhoto:n,location:o,photoFullInfoRemoteData:i,maybeMainImageInitialSrc:h,relatedPhotoIdsRemoteData:c,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:p,shouldTruncateDescription:d,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:r},this.renderChildRoute())}}]),t}();nn.contextTypes={router:c.a.object.isRequired};var an=Object(S.a)({updateData:I.qb,updatePhotoStats:I.rb,setErrorFlash:I.I,trackZoomedInPhoto:I.kb,trackZoomedOutPhoto:I.lb,showProgressBar:I.P,hideProgressBar:I.s,pageModalScrollResetRequested:I.w,updatePhotoFullInfoRemoteData:I.a.UpdatePhotoFullInfoRemoteData,updateRelatedPhotoIdsRemoteData:I.a.UpdateRelatedPhotoIdsRemoteData,updatePhotoStatsRemoteData:I.a.UpdatePhotoStatsRemoteData}),on=Object(L.b)(Object(l.connect)(function(){var e=Object(D.f)(),t=Object(R.b)(),n=Object(R.d)(),o=Object(R.c)();return function(r,i){var c=i.match.params.id;return{maybePhoto:a.a.of(e(r,c)),isLoggedIn:Object(x.h)(r),photoFullInfoRemoteData:t(r,{photoId:c}),relatedPhotoIdsRemoteData:n(r,{photoId:c}),photoStatsRemoteData:o(r,{photoId:c})}}},an)(nn));n.d(t,"default",function(){return on}),n.d(t,"PhotoFullInfoRemoteData",function(){}),n.d(t,"RelatedPhotoIdsRemoteData",function(){}),n.d(t,"PhotoStatsRemoteData",function(){})}}]);
//# sourceMappingURL=photos-route.main.a4b8b.js.map